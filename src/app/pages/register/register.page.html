<ion-header class="no-shadow"></ion-header>

<ion-content fullscreen class="login-full-bg" role="main" aria-label="Registro de cuenta">
  <div class="login-flex-container center-only">
    <div class="login-form-col">
      <section class="login-card" aria-labelledby="register-title">
        <h2 id="register-title" class="login-title">
          CREA TU CUENTA <span class="brand-title"></span>
        </h2>

        <form [formGroup]="registerForm" (ngSubmit)="registerEmail()" novalidate aria-describedby="form-errors">
          <fieldset>
            <legend class="sr-only">Formulario de registro</legend>

            <label for="email">Correo electrónico</label>
            <div class="input-item">
              <span class="input-icon" aria-hidden="true">
                <i class="fa fa-envelope"></i>
              </span>
              <input
                id="email"
                placeholder="Correo electrónico"
                formControlName="email"
                type="email"
                required
                aria-required="true"
                aria-describedby="email-error"
                class="input-field"
              />
            </div>
            <ion-text color="danger" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" id="email-error" class="error-text">
              Email inválido.
            </ion-text>

            <label for="password">Contraseña</label>
            <div class="input-item password-item">
              <span class="input-icon" aria-hidden="true">
                <i class="fa fa-key"></i>
              </span>
              <input
                id="password"
                [type]="showPassword ? 'text' : 'password'"
                placeholder="Contraseña"
                formControlName="password"
                required
                aria-required="true"
                aria-describedby="password-error"
                class="input-field"
              />
              <button
                type="button"
                class="toggle-password"
                (click)="togglePasswordVisibility()"
                [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'"
                tabindex="0"
              >
                <i [class]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
              </button>
            </div>
            <ion-text color="danger" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" id="password-error" class="error-text">
              Mínimo 6 caracteres.
            </ion-text>

            <button type="submit" class="login-btn" [disabled]="registerForm.invalid" [attr.aria-disabled]="registerForm.invalid">
              Registrarse
            </button>
          </fieldset>
        </form>

        <div class="divider" aria-hidden="true">
          <hr />
          <span>O</span>
          <hr />
        </div>

        <button class="social-btn google" (click)="registerGoogle()" type="button" aria-label="Registrarse con Google">
          <img
            src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
            class="social-icon"
            alt="Google"
          />
          REGISTRARSE CON GOOGLE
        </button>

        <button class="social-btn facebook" (click)="registerFacebook()" type="button" aria-label="Registrarse con Facebook">
          <img
            src="https://upload.wikimedia.org/wikipedia/commons/0/05/Facebook_Logo_%282019%29.png"
            class="social-icon"
            alt="Facebook"
          />
          REGISTRARSE CON FACEBOOK
        </button>

        <div *ngIf="success" class="success-msg" role="alert" tabindex="0">{{ success }}</div>
        <div *ngIf="error" class="error-msg" role="alert" tabindex="0">{{ error }}</div>

        <div class="register-row">
          <span>¿Ya tienes cuenta?</span>
          <a (click)="goToLogin()" class="register-link" role="link" tabindex="0" aria-label="Inicia sesión">
            Inicia sesión
          </a>
        </div>
      </section>
    </div>
  </div>
</ion-content>
